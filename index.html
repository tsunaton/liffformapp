<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„Éù„É©„É†Âã§ÂãôÂ†±Âëä</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/themes/base/jquery-ui.min.css">
    <style>
        .form-control {
            border: 2px solid #ffffff;
            border-radius: 1rem;
            background-color: #ffffff;
        }
        .background-container {
            position: relative;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        .background-container:before {
              content: "";
              position: absolute;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              background: url('pink_soft_background.jpg');
              background-size: cover;
              z-index: -1;
        }
        input[type="submit"] {
            display: block;
            margin: 0 auto 5rem;
            color: white;
            background-color: #ffa9bd;
            border-color: white;
        }
    </style>

</head>
<body>
    <div class="background-container">
        <form class="w-75 mx-auto">
            <p class="mt-3">Êó•ÊôÇ</p>
            <div>
                <input type="date" lass="form-control w-100 mt-1" name="date" required>
            </div>
            
            <p class="mt-3">ÂÆ∂</p>
            <div>
                <input class="form-control w-100 mt-1" name="ie" required>
            </div>
            
            <p class="mt-3">ÈñãÂßãÊôÇÈñì</p>
            <div>
                <select class="form-control w-100 mt-1" name="start_time" required>
                    <option value="7:00">7:00</option>
                    <option value="7:15">7:15</option>
                    <option value="7:30">7:30</option>
                    <option value="7:45">7:45</option>
                    <option value="8:00">8:00</option>
                    <option value="8:15">8:15</option>
                    <option value="8:30">8:30</option>
                    <option value="8:45">8:45</option>
                    <option value="9:00">9:00</option>
                    <option value="9:15">9:15</option>
                    <option value="9:30">9:30</option>
                    <option value="9:45">9:45</option>
                    <option value="10:00">10:00</option>
                    <option value="10:15">10:15</option>
                    <option value="10:30">10:30</option>
                    <option value="10:45">10:45</option>
                    <option value="11:00" selected>11:00</option>
                    <option value="11:15">11:15</option>
                    <option value="11:30">11:30</option>
                    <option value="11:45">11:45</option>
                    <option value="12:00">12:00</option>
                    <option value="12:15">12:15</option>
                    <option value="12:30">12:30</option>
                    <option value="12:45">12:45</option>
                    <option value="13:00">13:00</option>
                    <option value="13:15">13:15</option>
                    <option value="13:30">13:30</option>
                    <option value="13:45">13:45</option>
                    <option value="14:00">14:00</option>
                    <option value="14:15">14:15</option>
                    <option value="14:30">14:30</option>
                    <option value="14:45">14:45</option>
                    <option value="15:00">15:00</option>
                    <option value="15:15">15:15</option>
                    <option value="15:30">15:30</option>
                    <option value="15:45">15:45</option>
                    <option value="16:00">16:00</option>
                    <option value="16:15">16:15</option>
                    <option value="16:30">16:30</option>
                    <option value="16:45">16:45</option>
                    <option value="17:00">17:00</option>
                    <option value="17:15">17:15</option>
                    <option value="17:30">17:30</option>
                    <option value="17:45">17:45</option>
                    <option value="18:00">18:00</option>
                    <option value="18:15">18:15</option>
                    <option value="18:30">18:30</option>
                    <option value="18:45">18:45</option>
                    <option value="19:00">19:00</option>
                    <option value="19:15">19:15</option>
                    <option value="19:30">19:30</option>
                    <option value="19:45">19:45</option>
                    <option value="20:00">20:00</option>
                    <option value="20:15">20:15</option>
                    <option value="20:30">20:30</option>
                    <option value="20:45">20:45</option>
                    <option value="21:00">21:00</option>
                    <option value="21:15">21:15</option>
                    <option value="21:30">21:30</option>
                    <option value="21:45">21:45</option>
                    <option value="22:00">22:00</option>
                </select>
            </div>
            
            <p class="mt-3">ÁµÇ‰∫ÜÊôÇÈñì</p>
            <div>
                <select class="form-control w-100 mt-1" name="end_time" required>
                    <option value="7:00">7:00</option>
                    <option value="7:15">7:15</option>
                    <option value="7:30">7:30</option>
                    <option value="7:45">7:45</option>
                    <option value="8:00">8:00</option>
                    <option value="8:15">8:15</option>
                    <option value="8:30">8:30</option>
                    <option value="8:45">8:45</option>
                    <option value="9:00">9:00</option>
                    <option value="9:15">9:15</option>
                    <option value="9:30">9:30</option>
                    <option value="9:45">9:45</option>
                    <option value="10:00">10:00</option>
                    <option value="10:15">10:15</option>
                    <option value="10:30">10:30</option>
                    <option value="10:45">10:45</option>
                    <option value="11:00">11:00</option>
                    <option value="11:15">11:15</option>
                    <option value="11:30">11:30</option>
                    <option value="11:45">11:45</option>
                    <option value="12:00">12:00</option>
                    <option value="12:15">12:15</option>
                    <option value="12:30">12:30</option>
                    <option value="12:45">12:45</option>
                    <option value="13:00">13:00</option>
                    <option value="13:15">13:15</option>
                    <option value="13:30">13:30</option>
                    <option value="13:45">13:45</option>
                    <option value="14:00">14:00</option>
                    <option value="14:15">14:15</option>
                    <option value="14:30">14:30</option>
                    <option value="14:45">14:45</option>
                    <option value="15:00">15:00</option>
                    <option value="15:15">15:15</option>
                    <option value="15:30">15:30</option>
                    <option value="15:45">15:45</option>
                    <option value="16:00">16:00</option>
                    <option value="16:15">16:15</option>
                    <option value="16:30">16:30</option>
                    <option value="16:45">16:45</option>
                    <option value="17:00">17:00</option>
                    <option value="17:15">17:15</option>
                    <option value="17:30">17:30</option>
                    <option value="17:45">17:45</option>
                    <option value="18:00">18:00</option>
                    <option value="18:15">18:15</option>
                    <option value="18:30">18:30</option>
                    <option value="18:45">18:45</option>
                    <option value="19:00">19:00</option>
                    <option value="19:15">19:15</option>
                    <option value="19:30">19:30</option>
                    <option value="19:45">19:45</option>
                    <option value="20:00">20:00</option>
                    <option value="20:15">20:15</option>
                    <option value="20:30">20:30</option>
                    <option value="20:45">20:45</option>
                    <option value="21:00" selected>21:00</option>
                    <option value="21:15">21:15</option>
                    <option value="21:30">21:30</option>
                    <option value="21:45">21:45</option>
                    <option value="22:00">22:00</option>
                </select>
            </div>
            
            
        <p class="mt-3">Â†¥ÊâÄ</p>
            <div>
              <input list="placeList" class="form-control w-100 mt-1" name="place" required>
              <datalist id="placeList">
                <option value="Êà∏Áî∞ÂÖ¨Âúí„Éõ„Éº„É´">
                <option value="ÂåóÊà∏Áî∞„Éõ„Éº„É´">
                <option value="Ë∂äË∞∑ÊñéÂ†¥">
                <option value="ÂüºËëõÊñéÂ†¥">
                <option value="„Åø„Åö„ÅªÊñéÂ†¥">
                <option value="ÊòåÁ¶èÂØ∫">
                <option value="Â§ßÂÆÆËÅñËãë"> 
                <option value="Êµ¶ÂíåÊñéÂ†¥"> 
                <option value="ÊâÄÊ≤¢ÊñéÂ†¥"> 
                <option value="Ë∞∑Â°öÊñéÂ†¥"> 
                <option value="„Å§„Å§„ÅòËãë">
                <option value="Êµ¶ÂÆâÊñéÂ†¥">
                <option value="„Åó„ÅÆ„ÅÆ„ÇÅÊñéÂ†¥">
                <option value="„É°„É¢„É™„Ç¢„É´„Éà„Éç">
                <option value="‰∫ï‰∏ä„Çª„É≥„Çø„Éº">
                <option value="ÊÄù„ÅÑÂá∫„ÅÆÈáå">
              </datalist>
            </div>

            
            <p class="mt-3">„ÇØ„É©„Ç§„Ç¢„É≥„Éà</p>
            <div>
                <select class="form-control w-100 mt-1" name="client" required>
                    <option value="„Éï„É¨„Éº„Éê„Éº">„Éï„É¨„Éº„Éê„Éº</option>
                    <option value="Â°öË∂ä">Â°öË∂ä</option>
                    <option value="Êó¨Ëèú‰∫≠">Êó¨Ëèú‰∫≠</option>
                    <option value="Ê≠£Áõ¥Â±ã">Ê≠£Áõ¥Â±ã</option>
                    <option value="Âë≥„Åè„ÇâËãë">Âë≥„Åè„ÇâËãë</option>
                    <option value="„Çµ„É≥„Ç®„Éº„Éï„Éº„Éâ">„Çµ„É≥„Ç®„Éº„Éï„Éº„Éâ</option>
                    <option value="Áéâ‰πÉÂÆ∂">Áéâ‰πÉÂÆ∂</option>
                    <option value="Êù±‰∫¨Ê≠£Áõ¥Â±ã">Êù±‰∫¨Ê≠£Áõ¥Â±ã</option>
                    <option value="Ë∞∑Èßí">Ë∞∑Èßí</option>
                    <option value="Á†î‰øÆ‰∏≠">ÔºäÁ†î‰øÆ‰∏≠Ôºä</option>
                </select>
            </div>
            <div class="form-check mt-1">
              <input type="checkbox" class="form-check-input" id="clientUnknown">
              <label class="form-check-label" for="clientUnknown">ÂÄôË£ú„Å´„Å™„ÅÑ</label>
            </div>

            
            <p class="mt-3">‰∫§ÈÄöË≤ª</p>
            <div>
                <input type="number" class="form-control w-100 mt-1" name="transportation_fee">
            </div>
            
            <p class="mt-3">ÈßêËªäÂ†¥‰ª£</p>
            <div>
                <input type="number" class="form-control w-100 mt-1" name="parking_fee">
            </div>
            
            <p class="mt-3">„É°„É¢</p>
            <div>
                <input class="form-control w-100 mt-1" name="memo">
            </div>
            
            <input type="submit" class="mt-4 btn btn-primary" value="ÈÄÅ„ÄÄ‰ø°">
        </form>

    </div>

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>
    <script>

        $(document).ready(function () {
            const liffId = "1656776753-5ayjAoQQ";
            initializeLiff(liffId);
        })

        function initializeLiff(liffId) {
            liff.init({
                liffId: liffId
            }).then(() => {
                initializeApp();
            }).catch((err) => {
                console.log('LIFF Initialization failed ', err);
            });
        }

        function sendText(text) {
            liff.sendMessages([{
                'type': 'text',
                'text': text
            }]).then(function () {
                liff.closeWindow();
            }).catch(function (error) {
                window.alert('Failed to send message ' + error);
            });
        }

        const params = (new URL(document.location)).searchParams;
        const key = params.get('key');

        $(function () {
            $('form').submit(function () {
                const date = $('input[name="date"]').val();
                const ie = $('input[name="ie"]').val();
                const start_time = $('select[name="start_time"]').val();
                const end_time = $('select[name="end_time"]').val();
                const place = $('input[name="place"]').val();
        
                // üîΩ ÂÄôË£ú„Å´„Å™„ÅÑ„ÉÅ„Çß„ÉÉ„ÇØ„ÅåON„ÅÆÂ†¥Âêà„ÅØÂõ∫ÂÆöÂÄ§„Çí„ÄÅOFF„Å™„ÇâÂÖ•ÂäõÂÄ§„Çí‰Ωø„ÅÜ
                const client = $('#clientUnknown').is(':checked') ? 'ÂÄôË£ú„Å´„Å™„Åó' : $('select[name="client"]').val();
        
                const transportation_fee = $('input[name="transportation_fee"]').val();
                const parking_fee = $('input[name="parking_fee"]').val();
                const memo = $('input[name="memo"]').val();
        
                const msg = `${date}\n${ie}\n${start_time}\n${end_time}\n${place}\n${client}\n${transportation_fee}\n${parking_fee}\n${memo}`;
                sendText(msg);
                return false;
            });
        });


    </script>
    <script>
        $(document).ready(function () {
            // „Äå„ÇØ„É©„Ç§„Ç¢„É≥„Éà„Äç„ÅÆ„ÉÅ„Çß„ÉÉ„ÇØÁä∂ÊÖã„ÅßÈÅ∏ÊäûÊ¨Ñ„ÇíÊúâÂäπ/ÁÑ°Âäπ
            $('#clientUnknown').change(function () {
                $('select[name="client"]').prop('disabled', $(this).is(':checked'));
            });
        });
    </script>
    
    <script>
        let previousPlace = '';
        let previousClient = '';
    
        $(document).ready(function () {    
            // „Äå„ÇØ„É©„Ç§„Ç¢„É≥„Éà„Äç„ÉÅ„Çß„ÉÉ„ÇØÁä∂ÊÖã„ÅßÈÅ∏ÊäûÊ¨Ñ„ÅÆON/OFF„Å®ÂÄ§„ÅÆ‰øùÊåÅ„ÉªÂæ©ÂÖÉ
            $('#clientUnknown').change(function () {
                const $clientSelect = $('select[name="client"]');
                if ($(this).is(':checked')) {
                    previousClient = $clientSelect.val();
                    $clientSelect.val('');                 // Ë°®Á§∫„ÇíÁ©∫„Å´
                    $clientSelect.prop('disabled', true);
                } else {
                    $clientSelect.prop('disabled', false);
                    $clientSelect.val(previousClient);
                }
            });
        });
    </script>


</body>
</html>
