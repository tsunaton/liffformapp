<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒãƒ©ãƒ å‹¤å‹™å ±å‘Š</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/themes/base/jquery-ui.min.css">
    <style>
        .form-control {
            border: 2px solid #fec7da;
            border-radius: 1rem;
            background-color: #e1f6ff;
        }
        .background-container {
            position: relative;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        .background-container:before {
              content: "";
              position: absolute;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              background: url('é‡åŸã¨å®¶.jpg');
              background-size: cover;
              z-index: -1;
        }
        input[type="submit"] {
            display: block;
            margin: 0 auto 5rem;
            color: white;
            background-color: #ffa9bd;
            border-color: white;
        }
    </style>

</head>
<body>
    <div class="background-container">
        <form class="w-75 mx-auto">
            <p class="mt-3">æ—¥æ™‚</p>
            <div>
                <input type="date" lass="form-control w-100 mt-1" name="date" required>
            </div>
            
            <p class="mt-3">å®¶</p>
            <div>
                <input class="form-control w-100 mt-1" name="ie" required>
            </div>
            
            <p class="mt-3">é–‹å§‹æ™‚é–“</p>
            <div>
                <select class="form-control w-100 mt-1" name="start_time" required>
                    <option value="7:00">7:00</option>
                    <option value="7:15">7:15</option>
                    <option value="7:30">7:30</option>
                    <option value="7:45">7:45</option>
                    <option value="8:00">8:00</option>
                    <option value="8:15">8:15</option>
                    <option value="8:30">8:30</option>
                    <option value="8:45">8:45</option>
                    <option value="9:00">9:00</option>
                    <option value="9:15">9:15</option>
                    <option value="9:30">9:30</option>
                    <option value="9:45">9:45</option>
                    <option value="10:00">10:00</option>
                    <option value="10:15">10:15</option>
                    <option value="10:30">10:30</option>
                    <option value="10:45">10:45</option>
                    <option value="11:00" selected>11:00</option>
                    <option value="11:15">11:15</option>
                    <option value="11:30">11:30</option>
                    <option value="11:45">11:45</option>
                    <option value="12:00">12:00</option>
                    <option value="12:15">12:15</option>
                    <option value="12:30">12:30</option>
                    <option value="12:45">12:45</option>
                    <option value="13:00">13:00</option>
                    <option value="13:15">13:15</option>
                    <option value="13:30">13:30</option>
                    <option value="13:45">13:45</option>
                    <option value="14:00">14:00</option>
                    <option value="14:15">14:15</option>
                    <option value="14:30">14:30</option>
                    <option value="14:45">14:45</option>
                    <option value="15:00">15:00</option>
                    <option value="15:15">15:15</option>
                    <option value="15:30">15:30</option>
                    <option value="15:45">15:45</option>
                    <option value="16:00">16:00</option>
                    <option value="16:15">16:15</option>
                    <option value="16:30">16:30</option>
                    <option value="16:45">16:45</option>
                    <option value="17:00">17:00</option>
                    <option value="17:15">17:15</option>
                    <option value="17:30">17:30</option>
                    <option value="17:45">17:45</option>
                    <option value="18:00">18:00</option>
                    <option value="18:15">18:15</option>
                    <option value="18:30">18:30</option>
                    <option value="18:45">18:45</option>
                    <option value="19:00">19:00</option>
                    <option value="19:15">19:15</option>
                    <option value="19:30">19:30</option>
                    <option value="19:45">19:45</option>
                    <option value="20:00">20:00</option>
                    <option value="20:15">20:15</option>
                    <option value="20:30">20:30</option>
                    <option value="20:45">20:45</option>
                    <option value="21:00">21:00</option>
                    <option value="21:15">21:15</option>
                    <option value="21:30">21:30</option>
                    <option value="21:45">21:45</option>
                    <option value="22:00">22:00</option>
                </select>
            </div>
            
            <p class="mt-3">çµ‚äº†æ™‚é–“</p>
            <div>
                <select class="form-control w-100 mt-1" name="end_time" required>
                    <option value="7:00">7:00</option>
                    <option value="7:15">7:15</option>
                    <option value="7:30">7:30</option>
                    <option value="7:45">7:45</option>
                    <option value="8:00">8:00</option>
                    <option value="8:15">8:15</option>
                    <option value="8:30">8:30</option>
                    <option value="8:45">8:45</option>
                    <option value="9:00">9:00</option>
                    <option value="9:15">9:15</option>
                    <option value="9:30">9:30</option>
                    <option value="9:45">9:45</option>
                    <option value="10:00">10:00</option>
                    <option value="10:15">10:15</option>
                    <option value="10:30">10:30</option>
                    <option value="10:45">10:45</option>
                    <option value="11:00">11:00</option>
                    <option value="11:15">11:15</option>
                    <option value="11:30">11:30</option>
                    <option value="11:45">11:45</option>
                    <option value="12:00">12:00</option>
                    <option value="12:15">12:15</option>
                    <option value="12:30">12:30</option>
                    <option value="12:45">12:45</option>
                    <option value="13:00">13:00</option>
                    <option value="13:15">13:15</option>
                    <option value="13:30">13:30</option>
                    <option value="13:45">13:45</option>
                    <option value="14:00">14:00</option>
                    <option value="14:15">14:15</option>
                    <option value="14:30">14:30</option>
                    <option value="14:45">14:45</option>
                    <option value="15:00">15:00</option>
                    <option value="15:15">15:15</option>
                    <option value="15:30">15:30</option>
                    <option value="15:45">15:45</option>
                    <option value="16:00">16:00</option>
                    <option value="16:15">16:15</option>
                    <option value="16:30">16:30</option>
                    <option value="16:45">16:45</option>
                    <option value="17:00">17:00</option>
                    <option value="17:15">17:15</option>
                    <option value="17:30">17:30</option>
                    <option value="17:45">17:45</option>
                    <option value="18:00">18:00</option>
                    <option value="18:15">18:15</option>
                    <option value="18:30">18:30</option>
                    <option value="18:45">18:45</option>
                    <option value="19:00">19:00</option>
                    <option value="19:15">19:15</option>
                    <option value="19:30">19:30</option>
                    <option value="19:45">19:45</option>
                    <option value="20:00">20:00</option>
                    <option value="20:15">20:15</option>
                    <option value="20:30">20:30</option>
                    <option value="20:45">20:45</option>
                    <option value="21:00" selected>21:00</option>
                    <option value="21:15">21:15</option>
                    <option value="21:30">21:30</option>
                    <option value="21:45">21:45</option>
                    <option value="22:00">22:00</option>
                </select>
            </div>
            
            <p class="mt-3">å ´æ‰€</p>
            <div>
                <select class="form-control w-100 mt-1" name="place" required>
                    <option value="æˆ¸ç”°å…¬åœ’ãƒ›ãƒ¼ãƒ«">æˆ¸ç”°å…¬åœ’ãƒ›ãƒ¼ãƒ«</option>
                    <option value="åŒ—æˆ¸ç”°ãƒ›ãƒ¼ãƒ«">åŒ—æˆ¸ç”°ãƒ›ãƒ¼ãƒ«</option>
                    <option value="è¶Šè°·æ–å ´">è¶Šè°·æ–å ´</option>
                    <option value="åŸ¼è‘›æ–å ´">åŸ¼è‘›æ–å ´</option>
                    <option value="å¤§å®®è–è‹‘">å¤§å®®è–è‹‘</option> 
                    <option value="å¤§å®®è–è‹‘">è°·å¡šæ–å ´</option> 
                    <option value="ã¤ã¤ã˜è‹‘">ã¤ã¤ã˜è‹‘</option>
                    <option value="æµ¦å®‰æ–å ´">æµ¦å®‰æ–å ´</option>
                    <option value="ãƒ¡ãƒ¢ãƒªã‚¢ãƒ«ãƒˆãƒ">ãƒ¡ãƒ¢ãƒªã‚¢ãƒ«ãƒˆãƒ</option>
                    <option value="äº•ä¸Šã‚»ãƒ³ã‚¿ãƒ¼">äº•ä¸Šã‚»ãƒ³ã‚¿ãƒ¼</option>
                    <option value="ä¸­è¯æ–™ç†ã€€å¤©åºœ">ä¸­è¯æ–™ç†ã€€å¤©åºœ</option>
                    <option value="æ€ã„å‡ºã®é‡Œ">æ€ã„å‡ºã®é‡Œ</option>
                </select>
            </div>
            <div class="form-check mt-1">
              <input type="checkbox" class="form-check-input" id="placeUnknown">
              <label class="form-check-label" for="placeUnknown">å€™è£œã«ãªã„</label>
            </div>

    
            
            <p class="mt-3">ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ</p>
            <div>
                <select class="form-control w-100 mt-1" name="client" required>
                    <option value="ãƒ•ãƒ¬ãƒ¼ãƒãƒ¼">ãƒ•ãƒ¬ãƒ¼ãƒãƒ¼</option>
                    <option value="å¡šè¶Š">å¡šè¶Š</option>
                    <option value="æ—¬èœäº­">æ—¬èœäº­</option>
                    <option value="æ­£ç›´å±‹">æ­£ç›´å±‹</option>
                    <option value="å‘³ãã‚‰è‹‘">å‘³ãã‚‰è‹‘</option>
                    <option value="ã‚µãƒ³ã‚¨ãƒ¼ãƒ•ãƒ¼ãƒ‰">ã‚µãƒ³ã‚¨ãƒ¼ãƒ•ãƒ¼ãƒ‰</option>
                    <option value="ç‰ä¹ƒå®¶">ç‰ä¹ƒå®¶</option>
                    <option value="æ±äº¬æ­£ç›´å±‹">æ±äº¬æ­£ç›´å±‹</option>
                    <option value="æŸ³ç”Ÿ">æŸ³ç”Ÿ</option>
                    <option value="è°·é§’">è°·é§’</option>
                    <option value="ä¸­è¯æ–™ç†ã€€å¤©åºœ">ä¸­è¯æ–™ç†ã€€å¤©åºœ</option>
                    <option value="è¯é³³">è¯é³³</option>
                    <option value="å‰£ç¿†">å‰£ç¿ </option>
                    <option value="ç ”ä¿®ä¸­">ï¼Šç ”ä¿®ä¸­ï¼Š</option>
                </select>
            </div>
            <div class="form-check mt-1">
              <input type="checkbox" class="form-check-input" id="clientUnknown">
              <label class="form-check-label" for="clientUnknown">å€™è£œã«ãªã„</label>
            </div>

            
            <p class="mt-3">äº¤é€šè²»</p>
            <div>
                <input type="number" class="form-control w-100 mt-1" name="transportation_fee">
            </div>
            
            <p class="mt-3">é§è»Šå ´ä»£</p>
            <div>
                <input type="number" class="form-control w-100 mt-1" name="parking_fee">
            </div>
            
            <p class="mt-3">ãƒ¡ãƒ¢</p>
            <div>
                <input class="form-control w-100 mt-1" name="memo">
            </div>
            
            <input type="submit" class="mt-4 btn btn-primary" value="é€ã€€ä¿¡">
        </form>

    </div>

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>
    <script>

        $(document).ready(function () {
            const liffId = "1656776753-5ayjAoQQ";
            initializeLiff(liffId);
        })

        function initializeLiff(liffId) {
            liff.init({
                liffId: liffId
            }).then(() => {
                initializeApp();
            }).catch((err) => {
                console.log('LIFF Initialization failed ', err);
            });
        }

        function sendText(text) {
            liff.sendMessages([{
                'type': 'text',
                'text': text
            }]).then(function () {
                liff.closeWindow();
            }).catch(function (error) {
                window.alert('Failed to send message ' + error);
            });
        }

        const params = (new URL(document.location)).searchParams;
        const key = params.get('key');

        $(function () {
            $('form').submit(function () {
                const date = $('input[name="date"]').val();
                const ie = $('input[name="ie"]').val();
                const start_time = $('select[name="start_time"]').val();
                const end_time = $('select[name="end_time"]').val();
        
                // ğŸ”½ å€™è£œã«ãªã„ãƒã‚§ãƒƒã‚¯ãŒONã®å ´åˆã¯å›ºå®šå€¤ã‚’ã€OFFãªã‚‰å…¥åŠ›å€¤ã‚’ä½¿ã†
                const place = $('#placeUnknown').is(':checked') ? 'å€™è£œã«ãªã—' : $('input[name="place"]').val();
                const client = $('#clientUnknown').is(':checked') ? 'å€™è£œã«ãªã—' : $('select[name="client"]').val();
        
                const transportation_fee = $('input[name="transportation_fee"]').val();
                const parking_fee = $('input[name="parking_fee"]').val();
                const memo = $('input[name="memo"]').val();
        
                const msg = `${date}\n${ie}\n${start_time}\n${end_time}\n${place}\n${client}\n${transportation_fee}\n${parking_fee}\n${memo}`;
                sendText(msg);
                return false;
            });
        });


    </script>
    <script>
        $(document).ready(function () {
            // ã€Œå ´æ‰€ã€ã®ãƒã‚§ãƒƒã‚¯çŠ¶æ…‹ã§å…¥åŠ›æ¬„ã‚’æœ‰åŠ¹/ç„¡åŠ¹
            $('#placeUnknown').change(function () {
                $('input[name="place"]').prop('disabled', $(this).is(':checked'));
            });
    
            // ã€Œã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã€ã®ãƒã‚§ãƒƒã‚¯çŠ¶æ…‹ã§é¸æŠæ¬„ã‚’æœ‰åŠ¹/ç„¡åŠ¹
            $('#clientUnknown').change(function () {
                $('select[name="client"]').prop('disabled', $(this).is(':checked'));
            });
        });
    </script>
    
    <script>
        let previousPlace = '';
        let previousClient = '';
    
        $(document).ready(function () {
            // ã€Œå ´æ‰€ã€ãƒã‚§ãƒƒã‚¯çŠ¶æ…‹ã§å…¥åŠ›æ¬„ã®ON/OFFã¨å€¤ã®ä¿æŒãƒ»å¾©å…ƒ
            $('#placeUnknown').change(function () {
                const $placeInput = $('input[name="place"]');
                if ($(this).is(':checked')) {
                    previousPlace = $placeInput.val();     // ä»Šã®å€¤ã‚’ä¿å­˜
                    $placeInput.val('');                   // è¡¨ç¤ºã‚’ç©ºã«
                    $placeInput.prop('disabled', true);    // ç„¡åŠ¹åŒ–
                } else {
                    $placeInput.prop('disabled', false);   // æœ‰åŠ¹åŒ–
                    $placeInput.val(previousPlace);        // å…ƒã®å€¤ã‚’æˆ»ã™
                }
            });
    
            // ã€Œã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã€ãƒã‚§ãƒƒã‚¯çŠ¶æ…‹ã§é¸æŠæ¬„ã®ON/OFFã¨å€¤ã®ä¿æŒãƒ»å¾©å…ƒ
            $('#clientUnknown').change(function () {
                const $clientSelect = $('select[name="client"]');
                if ($(this).is(':checked')) {
                    previousClient = $clientSelect.val();
                    $clientSelect.val('');                 // è¡¨ç¤ºã‚’ç©ºã«
                    $clientSelect.prop('disabled', true);
                } else {
                    $clientSelect.prop('disabled', false);
                    $clientSelect.val(previousClient);
                }
            });
        });
    </script>


</body>
</html>
